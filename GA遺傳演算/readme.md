




# 何謂GA算法

依具生物環境適者生存的特性，模擬出來的演算法，利用選擇、組合、突變的方式找出更優良的基因組合。

我們可以將基因理解程一種解法的組合，透過自訂的適應函數與適應度，找出問題的次佳解，基本上此類演算法為解決<font style='color:deeppink'>組合最佳化問題的工具</font>。


# 為何需要GA算法
當組合最佳化問題很小的時候，可以透過暴力解找出最佳組合沒問題，但當組合過大需要全部可行的解在有限的時間計算完畢有困難時，基因演算就可做為解決這種問題的工具，此類問題通常為NP問題。值得注意的是基因演算法找到的解不一定為最佳解


# GA主要特性

- 以參數編碼的方式進行運算而不是參數本身，因此可以跳脱搜尋空間上的限制。

- 結果較具可解釋性，可透過適應函數解釋染色體基因排序
- 遺傳演算法使用機率規則方式去引導搜尋方向，屬於盲目
的搜尋方法，而不是採用明確的規則，因此較能符合各種
不同類型的最佳化問題。

# 流程
1. <font style='color:deeppink'>亂數N個基因</font>做為群體
2. 利用<font style='color:deeppink'>適應函數</font>計算適應值(這時應該可排序出，該問題概念上的好壞)
3. 依據每個基因的適應程度，做出篩選
4. 對活下來的基因進行組合、突變，產出更優良的下一代


## * 基因規劃種類
  - 二元編碼 : 適用於01背包問題、選擇問題、整數規劃問題，搜尋空間為2^L
  - 排列編碼 : 適用於排列有序問題，tsp、jap 等等，搜尋空間為 L!
  - 實數編碼 : 適用教具複雜數值問題，搜尋空間為n^L，這類問題通常需限定基因上下限(此次消耗最佳化專案搜索空間為產品製作數量上限)

# 交配

產生新的組合，交配做法有所不同，取決於本身問題編碼方式

- 單點交配 (固定的一部分進行互換)
- 雙點交配 (一個區間的互換)
- 多點交配 (多個區間的互換)
- Mask (制定條件進行交配)

# 突變
針對子代之遺傳基因以一定機率，更動某一基因値以防止染色體於複製及交配過程中，遺漏重要訊息或落入局部最佳解，突變在遺傳演算法當中，是發生機率比較低的（相較於
Crossover，Mutation的機率是低滿多的）

-  二元編碼突變 : 隨機選擇一個或多個位置的bits 進行反轉動作
-  排列突變 : 隨機選擇兩位置進行交換(這麼做可以變排序問題因突變導致重複排序)
-  實數突變 : 隨機選擇依位置給定解空間內的實數或對實作加減

# 選擇

依據毎一個染色體之適應度進行競爭，決定交配母群，適應度計算由適應度函示產生，適應度函式可解讀染色體基因編碼給出適應值。

- 分裂選擇
  - 方向 (選擇特定方向望大or望小)
  - 分裂 (只選頭尾)
  - 平衡 (只選中段)
  - 名人選擇 (保留最好的)
- 機率選擇
  - 輪盤式 (依比例分配，不改變資料分布狀況)
  - 競爭式 (隨機兩個出來比，此方式可能會遺失掉一些優秀染體體)

## GA 心得: 

- GA 的重點在於設計編碼，無論編碼如何適應函數可解並給出適應值，即可進行演化
- 非常大的族群或染色體長度，對於問題的描述精確度很高，但所需邊解碼等演化成本也相對增加
- 突變可能過高，可能跳出局部最佳解，但過高就與隨機搜尋無異，且子代容易遺失父代特徵
- 在適性函數給出適應值時，可考慮以懲罰扣分的方式評價一段染色體，不因一些基因不優而評價該段染色體為0(目的是為了盡可能保留優秀基因，避免因少數不良基因而拖累優良基因，導致過早收斂)

## GA 應用限制
- 染色體以離散方式描述問題，較難求解連續邊數(這邊指的是可能不是最佳或速度較慢)
- GA 是將問題的可解組合以編碼方式組成染色體，當問題的可解組合過多，染色體長度過長，將導致收斂時間過長或收斂效果不佳

# Ref
- https://medium.com/qiubingcheng/%E4%BB%A5python%E5%AF%A6%E4%BD%9C%E5%9F%BA%E5%9B%A0%E6%BC%94%E7%AE%97%E6%B3%95-genetic-algorithm-ga-%E4%B8%A6%E8%A7%A3%E6%B1%BA%E5%B7%A5%E4%BD%9C%E6%8C%87%E6%B4%BE%E5%95%8F%E9%A1%8C-job-assignment-problem-jap-b0d7c4ad6d0f
- https://www.iot.gov.tw/cp-91-70754-eb7ba-1.html
- http://enger.thu.edu.tw/files/archive/115_3eddd8d8.pdf
- http://ir.lib.ncut.edu.tw/bitstream/987654321/5566/2/%E5%9F%BA%E5%9B%A0%E6%BC%94%E7%AE%97%E6%B3%95%E5%9C%A8%E9%A2%A8%E8%83%BD%E5%87%BD%E6%95%B8%E5%8F%83%E6%95%B8%E4%B9%8B%E4%BC%B0%E7%AE%97.pdf
# 套件 
- https://pygad.readthedocs.io/en/latest/
- https://deap.readthedocs.io/en/master/index.html

# error 
- 遇到pip instapp deap (error: metadata-generation-failed) 降版本 => install setuptools==57.0.0